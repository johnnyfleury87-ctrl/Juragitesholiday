(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7434:function(e,r,n){Promise.resolve().then(n.bind(n,2175))},2175:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return c}});var s=n(7437),t=n(2265),i=n(7648),a=n(9376),l=n(9120),u=n(4445),o=n(8675);function c(){let e=(0,a.useRouter)(),[r,n]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[m,h]=(0,t.useState)(!1),[p,x]=(0,t.useState)(""),f=async n=>{n.preventDefault(),x(""),h(!0);try{let n=(0,o.e)(),{data:s,error:t}=await (0,u.zB)(n,r,c);if(t)throw t;let{data:i}=await n.from("org_members").select("role").eq("user_id",s.user.id).single();(null==i?void 0:i.role)==="admin"?e.push("/admin"):e.push("/app")}catch(e){x(e.message||"Erreur de connexion")}finally{h(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.sZ,{}),(0,s.jsx)("div",{className:"page-container",children:(0,s.jsxs)("div",{className:"container",style:{maxWidth:"400px",margin:"0 auto"},children:[(0,s.jsx)("h1",{style:{textAlign:"center",marginBottom:"2rem"},children:"Connexion"}),p&&(0,s.jsx)("div",{className:"error-message",children:p}),(0,s.jsxs)("form",{onSubmit:f,children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Email"}),(0,s.jsx)("input",{type:"email",value:r,onChange:e=>n(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Mot de passe"}),(0,s.jsx)("input",{type:"password",value:c,onChange:e=>d(e.target.value),required:!0})]}),(0,s.jsx)("button",{type:"submit",disabled:m,className:"btn-primary",style:{width:"100%"},children:m?"Connexion...":"Se connecter"})]}),(0,s.jsxs)("p",{style:{textAlign:"center",marginTop:"1.5rem"},children:["Pas encore inscrit ? ",(0,s.jsx)(i.default,{href:"/signup",style:{color:"#4F46E5"},children:"Cr\xe9er un compte"})]})]})}),(0,s.jsx)(l.dX,{})]})}},9376:function(e,r,n){"use strict";var s=n(5475);n.o(s,"useRouter")&&n.d(r,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[223,120,971,117,744],function(){return e(e.s=7434)}),_N_E=e.O()}]);