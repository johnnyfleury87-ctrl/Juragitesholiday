(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7434:function(e,n,t){Promise.resolve().then(t.bind(t,2175))},2175:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return c}});var r=t(7437),s=t(2265),a=t(7648),i=t(9376),u=t(9120),l=t(4445),o=t(8675);function c(){let e=(0,i.useRouter)(),[n,t]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[m,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(""),f=async t=>{t.preventDefault(),x(""),h(!0);try{let t=(0,o.e)(),{data:r,error:s}=await (0,l.zB)(t,n,c);if(s)throw s;let{data:a}=await t.from("org_members").select("role").eq("user_id",r.user.id).single();(null==a?void 0:a.role)==="admin"?e.push("/admin"):e.push("/app")}catch(e){x(e.message||"Erreur de connexion")}finally{h(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.sZ,{}),(0,r.jsx)("div",{className:"page-container",children:(0,r.jsxs)("div",{className:"container",style:{maxWidth:"400px",margin:"0 auto"},children:[(0,r.jsx)("h1",{style:{textAlign:"center",marginBottom:"2rem"},children:"Connexion"}),p&&(0,r.jsx)("div",{className:"error-message",children:p}),(0,r.jsxs)("form",{onSubmit:f,children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Email"}),(0,r.jsx)("input",{type:"email",value:n,onChange:e=>t(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Mot de passe"}),(0,r.jsx)("input",{type:"password",value:c,onChange:e=>d(e.target.value),required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"btn-primary",style:{width:"100%"},children:m?"Connexion...":"Se connecter"})]}),(0,r.jsxs)("p",{style:{textAlign:"center",marginTop:"1.5rem"},children:["Pas encore inscrit ? ",(0,r.jsx)(a.default,{href:"/signup",style:{color:"#4F46E5"},children:"Cr\xe9er un compte"})]})]})}),(0,r.jsx)(u.dX,{})]})}},9376:function(e,n,t){"use strict";var r=t(5475);t.o(r,"usePathname")&&t.d(n,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(n,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[53,648,120,971,117,744],function(){return e(e.s=7434)}),_N_E=e.O()}]);