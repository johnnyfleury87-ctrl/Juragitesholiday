(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{4789:function(e,r,t){Promise.resolve().then(t.bind(t,1999))},1999:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var n=t(7437),s=t(2265),a=t(7648),i=t(9376),u=t(9120),l=t(4445),o=t(8675);function c(){let e=(0,i.useRouter)(),[r,t]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[m,h]=(0,s.useState)(!1),[x,f]=(0,s.useState)(""),p=async t=>{t.preventDefault(),f(""),h(!0);try{let t=(0,o.e)(),{data:n,error:s}=await (0,l.zB)(t,r,c);if(s)throw s;let{data:a}=await t.from("org_members").select("role").eq("user_id",n.user.id).single();if(!a||"admin"!==a.role)throw Error("Acc\xe8s administrateur requis");e.push("/admin")}catch(e){f(e.message||"Erreur de connexion")}finally{h(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Pm,{}),(0,n.jsx)("div",{className:"page-container",children:(0,n.jsxs)("div",{className:"container",style:{maxWidth:"400px",margin:"0 auto"},children:[(0,n.jsx)("h1",{style:{textAlign:"center",marginBottom:"2rem"},children:"Connexion Admin"}),x&&(0,n.jsx)("div",{className:"error-message",children:x}),(0,n.jsxs)("form",{onSubmit:p,children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Email"}),(0,n.jsx)("input",{type:"email",value:r,onChange:e=>t(e.target.value),required:!0})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Mot de passe"}),(0,n.jsx)("input",{type:"password",value:c,onChange:e=>d(e.target.value),required:!0})]}),(0,n.jsx)("button",{type:"submit",disabled:m,className:"btn-primary",style:{width:"100%"},children:m?"Connexion...":"Se connecter"})]}),(0,n.jsx)("p",{style:{textAlign:"center",marginTop:"1.5rem"},children:(0,n.jsx)(a.default,{href:"/",style:{color:"#4F46E5"},children:"Retour \xe0 l'accueil"})})]})})]})}},9376:function(e,r,t){"use strict";var n=t(5475);t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[53,648,120,971,117,744],function(){return e(e.s=4789)}),_N_E=e.O()}]);