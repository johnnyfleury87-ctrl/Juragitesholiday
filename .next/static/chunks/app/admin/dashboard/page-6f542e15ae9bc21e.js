(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{9399:function(e,s,t){Promise.resolve().then(t.bind(t,6861))},6861:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(7437),n=t(2265),i=t(7648),r=t(9120);t(3511);let l=[{id:"1",slug:"gite-montagne-vue",title:"G\xeete de Montagne",price:150},{id:"2",slug:"maison-lac-proximite",title:"Maison Proximit\xe9 Lac",price:120},{id:"3",slug:"chalet-des-sapins",title:"Chalet des Sapins",price:320},{id:"4",slug:"maison-du-lac",title:"Maison du Lac",price:210}],c=[{id:1,property:"G\xeete de Montagne",checkin:"2026-01-15",checkout:"2026-01-20",nights:5,price:150,total:750,status:"confirmed",source:"website"},{id:2,property:"Maison du Lac",checkin:"2026-01-18",checkout:"2026-01-25",nights:7,price:210,total:1470,status:"confirmed",source:"airbnb"},{id:3,property:"Chalet des Sapins",checkin:"2026-02-01",checkout:"2026-02-08",nights:7,price:320,total:2240,status:"pending",source:"website"},{id:4,property:"Maison Proximit\xe9",checkin:"2026-01-20",checkout:"2026-01-22",nights:2,price:120,total:240,status:"confirmed",source:"website"},{id:5,property:"G\xeete de Montagne",checkin:"2026-02-10",checkout:"2026-02-15",nights:5,price:150,total:750,status:"cancelled",source:"website"}],o=[{id:1,type:"m\xe9nage",amount:150,property:"G\xeete de Montagne",date:"2026-01-15"},{id:2,type:"\xe9lectricit\xe9",amount:200,property:null,date:"2026-01-10"},{id:3,type:"entretien",amount:300,property:"Chalet des Sapins",date:"2026-01-12"}],d=[{property:"Maison du Lac",nights:10,price:210},{property:"G\xeete de Montagne",nights:5,price:150},{property:"Chalet des Sapins",nights:7,price:320}],h=()=>{let e=c.filter(e=>"confirmed"===e.status),s=c.filter(e=>"pending"===e.status),t=c.filter(e=>"cancelled"===e.status),a=e.reduce((e,s)=>e+s.total,0);s.reduce((e,s)=>e+s.total,0);let n=d.reduce((e,s)=>e+s.nights*s.price,0),i=o.reduce((e,s)=>e+s.amount,0),r=c.filter(e=>"website"===e.source).length,l=c.filter(e=>"airbnb"===e.source).length;return{totalVisits:1247,totalUsers:89,totalBookings:c.length,totalCancellations:t.length,totalCA:a,caEncashed:.8*a,caFuture:n,totalCharges:i,confirmed:e.length,pending:s.length,cancelled:t.length,totalDeposits:.2*a,remainingCA:.2*a,websiteBookings:r,airbnbBookings:l}};function u(e){let{title:s,value:t,subtitle:n,trend:i,color:r="blue"}=e;return(0,a.jsxs)("div",{className:"kpi-card kpi-".concat(r),children:[(0,a.jsxs)("div",{className:"kpi-content",children:[(0,a.jsx)("h3",{className:"kpi-title",children:s}),(0,a.jsx)("div",{className:"kpi-value",children:t}),n&&(0,a.jsx)("p",{className:"kpi-subtitle",children:n})]}),i&&(0,a.jsxs)("div",{className:"kpi-trend ".concat(i>0?"positive":"negative"),children:[i>0?"↑":"↓"," ",Math.abs(i),"%"]})]})}function m(e){let{property:s,stats:t}=e,n=t.propertyStats[s.slug]||{views:0,bookings:0,cancellations:0,ca:0,caEncashed:0,caFuture:0};return(0,a.jsxs)("div",{className:"property-stat-card",children:[(0,a.jsx)("h4",{children:s.title}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"Vues:"}),(0,a.jsx)("strong",{children:n.views})]}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"R\xe9servations:"}),(0,a.jsx)("strong",{children:n.bookings})]}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"Annulations:"}),(0,a.jsx)("strong",{children:n.cancellations})]}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"CA g\xe9n\xe9r\xe9:"}),(0,a.jsxs)("strong",{children:[n.ca,"€"]})]}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"CA encaiss\xe9:"}),(0,a.jsxs)("strong",{children:[n.caEncashed,"€"]})]}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"CA pr\xe9visionnel:"}),(0,a.jsxs)("strong",{style:{color:"#059669"},children:[n.caFuture,"€"]})]})]})}function x(e){let{onAddCharge:s}=e,[t,i]=(0,n.useState)({type:"m\xe9nage",amount:"",property:"",date:new Date().toISOString().split("T")[0]});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.amount&&(s({id:Date.now(),...t,amount:parseFloat(t.amount)}),i({type:"m\xe9nage",amount:"",property:"",date:new Date().toISOString().split("T")[0]}))},className:"charge-form",children:[(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Type de charge"}),(0,a.jsxs)("select",{value:t.type,onChange:e=>i({...t,type:e.target.value}),children:[(0,a.jsx)("option",{value:"m\xe9nage",children:"M\xe9nage"}),(0,a.jsx)("option",{value:"entretien",children:"Entretien"}),(0,a.jsx)("option",{value:"\xe9lectricit\xe9",children:"\xc9lectricit\xe9"}),(0,a.jsx)("option",{value:"eau",children:"Eau"}),(0,a.jsx)("option",{value:"chauffage",children:"Chauffage"}),(0,a.jsx)("option",{value:"autre",children:"Autre"})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Montant"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:t.amount,onChange:e=>i({...t,amount:e.target.value}),placeholder:"0.00",required:!0})]})]}),(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Logement (optionnel)"}),(0,a.jsxs)("select",{value:t.property,onChange:e=>i({...t,property:e.target.value}),children:[(0,a.jsx)("option",{value:"",children:"-- Tous les logements --"}),l.map(e=>(0,a.jsx)("option",{value:e.title,children:e.title},e.id))]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Date"}),(0,a.jsx)("input",{type:"date",value:t.date,onChange:e=>i({...t,date:e.target.value})})]})]}),(0,a.jsx)("button",{type:"submit",className:"btn-submit",children:"+ Ajouter charge"})]})}function p(){let[e,s]=(0,n.useState)(o),t=h(),p={};l.forEach(e=>{let s=c.filter(s=>s.property.toLowerCase().includes(e.title.split(" ")[0].toLowerCase())||e.title.includes(s.property.split(" ")[0])),t=s.filter(e=>"confirmed"===e.status),a=s.filter(e=>"cancelled"===e.status);p[e.slug]={views:Math.floor(500*Math.random())+50,bookings:t.length,cancellations:a.length,ca:t.reduce((e,s)=>e+s.total,0),caEncashed:.8*t.reduce((e,s)=>e+s.total,0),caFuture:d.filter(s=>s.property===e.title).reduce((e,s)=>e+s.nights*s.price,0)}});let g={...t,propertyStats:p},v=e.reduce((e,s)=>e+s.amount,0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Pm,{}),(0,a.jsxs)("div",{className:"admin-dashboard",children:[(0,a.jsxs)("div",{className:"dashboard-header",children:[(0,a.jsx)("h1",{children:"\uD83D\uDCCA Tableau de Bord Administrateur"}),(0,a.jsx)("p",{children:"G\xe9rez vos logements, r\xe9servations et finances"}),(0,a.jsx)(i.default,{href:"/admin/logements",className:"btn-secondary",children:"↪️ Gestion des logements"})]}),(0,a.jsxs)("section",{className:"dashboard-section",children:[(0,a.jsx)("h2",{children:"\uD83D\uDCC8 KPIs Globaux"}),(0,a.jsxs)("div",{className:"kpi-grid",children:[(0,a.jsx)(u,{title:"Visites du site",value:t.totalVisits.toLocaleString(),subtitle:"ce mois",trend:12,color:"blue"}),(0,a.jsx)(u,{title:"Utilisateurs inscrits",value:t.totalUsers,subtitle:"total",trend:8,color:"green"}),(0,a.jsx)(u,{title:"Total r\xe9servations",value:t.totalBookings,subtitle:"".concat(t.confirmed," confirm\xe9es, ").concat(t.pending," en attente"),color:"purple"}),(0,a.jsx)(u,{title:"Annulations",value:t.totalCancellations,subtitle:"".concat((t.totalCancellations/t.totalBookings*100).toFixed(1),"% du total"),trend:-5,color:"orange"}),(0,a.jsx)(u,{title:"Chiffre d'affaires",value:"€".concat(t.totalCA.toLocaleString()),subtitle:"confirm\xe9",color:"green"}),(0,a.jsx)(u,{title:"CA encaiss\xe9",value:"€".concat(t.caEncashed.toLocaleString()),subtitle:"".concat((t.caEncashed/t.totalCA*100).toFixed(0),"% re\xe7u"),color:"blue"}),(0,a.jsx)(u,{title:"CA pr\xe9visionnel",value:"€".concat(t.caFuture.toLocaleString()),subtitle:"\xe0 venir",color:"green"}),(0,a.jsx)(u,{title:"Total charges",value:"€".concat(v.toLocaleString()),subtitle:"ce mois",color:"red"})]})]}),(0,a.jsxs)("section",{className:"dashboard-section",children:[(0,a.jsx)("h2",{children:"\uD83D\uDCCB R\xe9sum\xe9 R\xe9servations"}),(0,a.jsxs)("div",{className:"summary-grid",children:[(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-number",children:t.confirmed}),(0,a.jsx)("div",{className:"summary-label",children:"Confirm\xe9es"}),(0,a.jsxs)("div",{className:"summary-value",children:["€",j.reduce((e,s)=>e+s.total,0)]})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-number",children:t.pending}),(0,a.jsx)("div",{className:"summary-label",children:"En attente"}),(0,a.jsxs)("div",{className:"summary-value",children:["€",c.filter(e=>"pending"===e.status).reduce((e,s)=>e+s.total,0)]})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-number",children:t.cancelled}),(0,a.jsx)("div",{className:"summary-label",children:"Annul\xe9es"}),(0,a.jsxs)("div",{className:"summary-value",children:[(t.cancelled/t.totalBookings*100).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-number",children:t.totalDeposits.toFixed(0)}),(0,a.jsx)("div",{className:"summary-label",children:"Acomptes re\xe7us"}),(0,a.jsx)("div",{className:"summary-value",children:"20% du CA"})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-number",children:t.remainingCA.toFixed(0)}),(0,a.jsx)("div",{className:"summary-label",children:"\xc0 encaisser"}),(0,a.jsx)("div",{className:"summary-value",children:"80% du CA"})]})]})]}),(0,a.jsxs)("section",{className:"dashboard-section",children:[(0,a.jsx)("h2",{children:"\uD83C\uDFE0 Performance par Logement"}),(0,a.jsx)("div",{className:"property-grid",children:l.map(e=>(0,a.jsx)(m,{property:e,stats:g},e.id))})]}),(0,a.jsxs)("section",{className:"dashboard-section",children:[(0,a.jsx)("h2",{children:"\uD83C\uDF10 Origine des R\xe9servations"}),(0,a.jsxs)("div",{className:"chart-container",children:[(0,a.jsxs)("div",{className:"pie-chart-mock",children:[(0,a.jsx)("div",{className:"pie-segment",style:{width:"".concat(t.websiteBookings/t.totalBookings*100,"%"),backgroundColor:"#3B82F6"},children:(0,a.jsxs)("span",{className:"pie-label",children:["Site Web: ",t.websiteBookings]})}),(0,a.jsx)("div",{className:"pie-segment",style:{width:"".concat(t.airbnbBookings/t.totalBookings*100,"%"),backgroundColor:"#FF5A5F"},children:(0,a.jsxs)("span",{className:"pie-label",children:["Airbnb: ",t.airbnbBookings]})})]}),(0,a.jsxs)("div",{className:"chart-legend",children:[(0,a.jsxs)("div",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-color",style:{backgroundColor:"#3B82F6"}}),(0,a.jsxs)("span",{children:["Site Web: ",t.websiteBookings," (",(t.websiteBookings/t.totalBookings*100).toFixed(0),"%)"]})]}),(0,a.jsxs)("div",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-color",style:{backgroundColor:"#FF5A5F"}}),(0,a.jsxs)("span",{children:["Airbnb: ",t.airbnbBookings," (",(t.airbnbBookings/t.totalBookings*100).toFixed(0),"%)"]})]})]})]})]}),(0,a.jsxs)("section",{className:"dashboard-section",children:[(0,a.jsx)("h2",{children:"\uD83D\uDCB0 Gestion des Charges"}),(0,a.jsx)(x,{onAddCharge:t=>s([...e,t])}),(0,a.jsxs)("div",{className:"charges-table",children:[(0,a.jsx)("h3",{children:"Charges enregistr\xe9es"}),(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Date"}),(0,a.jsx)("th",{children:"Type"}),(0,a.jsx)("th",{children:"Logement"}),(0,a.jsx)("th",{children:"Montant"}),(0,a.jsx)("th",{children:"Impact CA"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>{var s,n;let i=e.property?(null===(s=p[null===(n=l.find(s=>s.title===e.property))||void 0===n?void 0:n.slug])||void 0===s?void 0:s.ca)||0:t.totalCA,r=(e.amount/i*100).toFixed(1);return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.date}),(0,a.jsx)("td",{children:e.type}),(0,a.jsx)("td",{children:e.property||"---"}),(0,a.jsxs)("td",{className:"amount",children:["€",e.amount.toFixed(2)]}),(0,a.jsxs)("td",{style:{color:r>10?"#DC2626":"#059669"},children:["-",r,"%"]})]},e.id)})})]}),(0,a.jsxs)("div",{className:"charges-summary",children:[(0,a.jsx)("span",{children:"Total charges:"}),(0,a.jsxs)("strong",{children:["€",v.toFixed(2)]}),(0,a.jsx)("span",{children:"Marge nette:"}),(0,a.jsxs)("strong",{children:["€",(t.totalCA-v).toFixed(2)]})]})]})]}),(0,a.jsxs)("section",{className:"dashboard-section",children:[(0,a.jsx)("h2",{children:"\uD83D\uDD2E Pr\xe9visions & Export"}),(0,a.jsxs)("div",{className:"forecast-container",children:[(0,a.jsxs)("div",{className:"forecast-card",children:[(0,a.jsx)("h3",{children:"Pr\xe9vision CA (Janvier 2026)"}),(0,a.jsx)("div",{className:"forecast-bar",children:(0,a.jsx)("div",{className:"forecast-fill",style:{width:"65%"}})}),(0,a.jsxs)("div",{className:"forecast-text",children:[(0,a.jsxs)("strong",{children:["€",t.caFuture.toLocaleString()]})," estim\xe9",(0,a.jsxs)("span",{children:["(bas\xe9 sur ",d.length," r\xe9servations programm\xe9es)"]})]})]}),(0,a.jsxs)("div",{className:"forecast-card",children:[(0,a.jsx)("h3",{children:"Analyse Rentabilit\xe9"}),(0,a.jsxs)("div",{className:"rentability-items",children:[(0,a.jsxs)("div",{className:"item",children:[(0,a.jsx)("span",{children:"CA g\xe9n\xe9r\xe9:"}),(0,a.jsxs)("strong",{children:["€",t.totalCA.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"item",children:[(0,a.jsx)("span",{children:"Charges:"}),(0,a.jsxs)("strong",{children:["-€",v.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"item divider",children:[(0,a.jsx)("span",{children:"Marge nette:"}),(0,a.jsxs)("strong",{style:{color:"#059669"},children:["€",(t.totalCA-v).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"item",children:[(0,a.jsx)("span",{children:"Rentabilit\xe9:"}),(0,a.jsxs)("strong",{children:[((t.totalCA-v)/t.totalCA*100).toFixed(1),"%"]})]})]})]})]}),(0,a.jsxs)("div",{className:"export-section",children:[(0,a.jsx)("button",{className:"btn-export",onClick:()=>{let s=new Blob(["Date,Type,Propri\xe9t\xe9,Montant\n".concat(e.map(e=>"".concat(e.date,",").concat(e.type,",").concat(e.property||"N/A",",").concat(e.amount)).join("\n"))],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="charges_".concat(new Date().toISOString().split("T")[0],".csv"),a.click()},children:"\uD83D\uDCE5 Exporter Charges (CSV)"}),(0,a.jsx)("button",{className:"btn-export",onClick:()=>{let e=new Blob(["Date,Logement,Statut,Prix Total,Source\n".concat(c.map(e=>"".concat(e.checkin,",").concat(e.property,",").concat(e.status,",").concat(e.total,",").concat(e.source)).join("\n"))],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="reservations_".concat(new Date().toISOString().split("T")[0],".csv"),t.click()},children:"\uD83D\uDCE5 Exporter R\xe9servations (CSV)"})]})]})]})]})}let j=c.filter(e=>"confirmed"===e.status)},3511:function(){}},function(e){e.O(0,[944,16,120,971,117,744],function(){return e(e.s=9399)}),_N_E=e.O()}]);