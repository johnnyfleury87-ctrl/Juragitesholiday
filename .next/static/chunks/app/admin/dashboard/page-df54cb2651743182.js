(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{9399:function(e,s,t){Promise.resolve().then(t.bind(t,6861))},6861:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(7437),i=t(2265),n=t(7648),l=t(9120);t(3511);let r=[{id:"1",slug:"gite-montagne-vue",title:"G\xeete de Montagne",price:150},{id:"2",slug:"maison-lac-proximite",title:"Maison Proximit\xe9 Lac",price:120},{id:"3",slug:"chalet-des-sapins",title:"Chalet des Sapins",price:320},{id:"4",slug:"maison-du-lac",title:"Maison du Lac",price:210}],c=[{id:1,property:"G\xeete de Montagne",checkin:"2026-01-15",checkout:"2026-01-20",nights:5,price:150,total:750,status:"confirmed",source:"website"},{id:2,property:"Maison du Lac",checkin:"2026-01-18",checkout:"2026-01-25",nights:7,price:210,total:1470,status:"confirmed",source:"airbnb"},{id:3,property:"Chalet des Sapins",checkin:"2026-02-01",checkout:"2026-02-08",nights:7,price:320,total:2240,status:"pending",source:"website"},{id:4,property:"Maison Proximit\xe9",checkin:"2026-01-20",checkout:"2026-01-22",nights:2,price:120,total:240,status:"confirmed",source:"website"},{id:5,property:"G\xeete de Montagne",checkin:"2026-02-10",checkout:"2026-02-15",nights:5,price:150,total:750,status:"cancelled",source:"website"}],o=[{id:1,type:"m\xe9nage",amount:150,property:"G\xeete de Montagne",date:"2026-01-15"},{id:2,type:"\xe9lectricit\xe9",amount:200,property:null,date:"2026-01-10"},{id:3,type:"entretien",amount:300,property:"Chalet des Sapins",date:"2026-01-12"}],d=[{property:"Maison du Lac",nights:10,price:210},{property:"G\xeete de Montagne",nights:5,price:150},{property:"Chalet des Sapins",nights:7,price:320}],h=()=>{let e=c.filter(e=>"confirmed"===e.status),s=c.filter(e=>"pending"===e.status),t=c.filter(e=>"cancelled"===e.status),a=e.reduce((e,s)=>e+s.total,0);s.reduce((e,s)=>e+s.total,0);let i=d.reduce((e,s)=>e+s.nights*s.price,0),n=o.reduce((e,s)=>e+s.amount,0),l=c.filter(e=>"website"===e.source).length,r=c.filter(e=>"airbnb"===e.source).length;return{totalVisits:1247,totalUsers:89,totalBookings:c.length,totalCancellations:t.length,totalCA:a,caEncashed:.8*a,caFuture:i,totalCharges:n,confirmed:e.length,pending:s.length,cancelled:t.length,totalDeposits:.2*a,remainingCA:.2*a,websiteBookings:l,airbnbBookings:r}};function u(e){let{title:s,value:t,subtitle:i,trend:n}=e;return(0,a.jsxs)("div",{className:"kpi-card","data-animation":"fade-slide",children:[(0,a.jsxs)("div",{className:"kpi-content",children:[(0,a.jsx)("h3",{className:"kpi-title",children:s}),(0,a.jsx)("div",{className:"kpi-value",children:t}),i&&(0,a.jsx)("p",{className:"kpi-subtitle",children:i})]}),n&&(0,a.jsxs)("div",{className:"kpi-trend ".concat(n>0?"positive":"negative"),children:[n>0?"↑":"↓"," ",Math.abs(n),"%"]})]})}function m(e){let{property:s,stats:t}=e,i=t.propertyStats[s.slug]||{views:0,bookings:0,cancellations:0,ca:0,caEncashed:0,caFuture:0};return(0,a.jsxs)("div",{className:"property-stat-card",children:[(0,a.jsx)("h4",{children:s.title}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"Vues:"}),(0,a.jsx)("strong",{children:i.views})]}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"R\xe9servations:"}),(0,a.jsx)("strong",{children:i.bookings})]}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"Annulations:"}),(0,a.jsx)("strong",{children:i.cancellations})]}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"CA g\xe9n\xe9r\xe9:"}),(0,a.jsxs)("strong",{children:[i.ca,"€"]})]}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"CA encaiss\xe9:"}),(0,a.jsxs)("strong",{children:[i.caEncashed,"€"]})]}),(0,a.jsxs)("div",{className:"stat-row",children:[(0,a.jsx)("span",{children:"CA pr\xe9visionnel:"}),(0,a.jsxs)("strong",{style:{color:"#059669"},children:[i.caFuture,"€"]})]})]})}function x(e){let{onAddCharge:s}=e,[t,n]=(0,i.useState)({type:"m\xe9nage",amount:"",property:"",date:new Date().toISOString().split("T")[0]});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.amount&&(s({id:Date.now(),...t,amount:parseFloat(t.amount)}),n({type:"m\xe9nage",amount:"",property:"",date:new Date().toISOString().split("T")[0]}))},className:"charge-form",children:[(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Type de charge"}),(0,a.jsxs)("select",{value:t.type,onChange:e=>n({...t,type:e.target.value}),children:[(0,a.jsx)("option",{value:"m\xe9nage",children:"M\xe9nage"}),(0,a.jsx)("option",{value:"entretien",children:"Entretien"}),(0,a.jsx)("option",{value:"\xe9lectricit\xe9",children:"\xc9lectricit\xe9"}),(0,a.jsx)("option",{value:"eau",children:"Eau"}),(0,a.jsx)("option",{value:"chauffage",children:"Chauffage"}),(0,a.jsx)("option",{value:"autre",children:"Autre"})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Montant"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:t.amount,onChange:e=>n({...t,amount:e.target.value}),placeholder:"0.00",required:!0})]})]}),(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Logement (optionnel)"}),(0,a.jsxs)("select",{value:t.property,onChange:e=>n({...t,property:e.target.value}),children:[(0,a.jsx)("option",{value:"",children:"-- Tous les logements --"}),r.map(e=>(0,a.jsx)("option",{value:e.title,children:e.title},e.id))]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Date"}),(0,a.jsx)("input",{type:"date",value:t.date,onChange:e=>n({...t,date:e.target.value})})]})]}),(0,a.jsx)("button",{type:"submit",className:"btn-submit",children:"+ Ajouter charge"})]})}function p(){let[e,s]=(0,i.useState)(o),t=(0,i.useRef)(null),p=h(),g={};r.forEach(e=>{let s=c.filter(s=>s.property.toLowerCase().includes(e.title.split(" ")[0].toLowerCase())||e.title.includes(s.property.split(" ")[0])),t=s.filter(e=>"confirmed"===e.status),a=s.filter(e=>"cancelled"===e.status);g[e.slug]={views:Math.floor(500*Math.random())+50,bookings:t.length,cancellations:a.length,ca:t.reduce((e,s)=>e+s.total,0),caEncashed:.8*t.reduce((e,s)=>e+s.total,0),caFuture:d.filter(s=>s.property===e.title).reduce((e,s)=>e+s.nights*s.price,0)}});let v={...p,propertyStats:g},b=e.reduce((e,s)=>e+s.amount,0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Pm,{}),(0,a.jsxs)("div",{className:"admin-dashboard",children:[(0,a.jsxs)("div",{className:"dashboard-header","data-animation":"fade",children:[(0,a.jsx)("h1",{children:"JuraGites Admin"}),(0,a.jsx)("p",{children:"G\xe9rez vos logements, r\xe9servations et finances en temps r\xe9el"}),(0,a.jsxs)("div",{className:"header-actions",children:[(0,a.jsx)("button",{onClick:()=>{var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"})},className:"btn-celia",children:"✨ C\xe9lia, pour ta gestion c'est ici"}),(0,a.jsx)(n.default,{href:"/admin/logements",className:"btn-secondary",children:"\uD83C\uDFE0 Gestion des logements"})]})]}),(0,a.jsxs)("section",{className:"dashboard-section","data-animation":"fade-slide",children:[(0,a.jsx)("h2",{children:"\uD83D\uDCCA KPIs Globaux"}),(0,a.jsxs)("div",{className:"kpi-grid",children:[(0,a.jsx)(u,{title:"Visites du site",value:p.totalVisits.toLocaleString(),subtitle:"derniers 30 jours",trend:12}),(0,a.jsx)(u,{title:"Utilisateurs inscrits",value:p.totalUsers,subtitle:"total plateforme",trend:8}),(0,a.jsx)(u,{title:"R\xe9servations confirm\xe9es",value:p.confirmed,subtitle:"".concat(p.totalBookings," r\xe9servations au total")}),(0,a.jsx)(u,{title:"Taux d'annulation",value:"".concat((p.totalCancellations/p.totalBookings*100).toFixed(1),"%"),subtitle:p.totalCancellations>0?"".concat(p.totalCancellations," annul\xe9e(s)"):"Aucune",trend:-5}),(0,a.jsx)(u,{title:"Chiffre d'affaires",value:"€".concat(p.totalCA.toLocaleString()),subtitle:"montant confirm\xe9"}),(0,a.jsx)(u,{title:"CA encaiss\xe9",value:"€".concat(p.caEncashed.toLocaleString()),subtitle:"".concat((p.caEncashed/p.totalCA*100).toFixed(0),"% du CA")}),(0,a.jsx)(u,{title:"CA pr\xe9visionnel",value:"€".concat(p.caFuture.toLocaleString()),subtitle:"r\xe9servations \xe0 venir"}),(0,a.jsx)(u,{title:"Charges mensuelles",value:"€".concat(b.toLocaleString()),subtitle:"impact sur rentabilit\xe9"})]})]}),(0,a.jsxs)("section",{className:"dashboard-section","data-animation":"fade-slide",children:[(0,a.jsx)("h2",{children:"\uD83D\uDCCB R\xe9sum\xe9 R\xe9servations"}),(0,a.jsxs)("div",{className:"summary-grid",children:[(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-number",children:p.confirmed}),(0,a.jsx)("div",{className:"summary-label",children:"Confirm\xe9es"}),(0,a.jsxs)("div",{className:"summary-value",children:["€",j.reduce((e,s)=>e+s.total,0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-number",children:p.pending}),(0,a.jsx)("div",{className:"summary-label",children:"En attente"}),(0,a.jsxs)("div",{className:"summary-value",children:["€",c.filter(e=>"pending"===e.status).reduce((e,s)=>e+s.total,0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-number",children:p.cancelled}),(0,a.jsx)("div",{className:"summary-label",children:"Annul\xe9es"}),(0,a.jsxs)("div",{className:"summary-value",children:[(p.cancelled/p.totalBookings*100).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsxs)("div",{className:"summary-number",children:["€",p.totalDeposits.toFixed(0)]}),(0,a.jsx)("div",{className:"summary-label",children:"Acomptes re\xe7us"}),(0,a.jsx)("div",{className:"summary-value",children:"20% du CA"})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsxs)("div",{className:"summary-number",children:["€",p.remainingCA.toFixed(0)]}),(0,a.jsx)("div",{className:"summary-label",children:"\xc0 encaisser"}),(0,a.jsx)("div",{className:"summary-value",children:"80% du CA"})]})]})]}),(0,a.jsxs)("section",{className:"dashboard-section","data-animation":"fade-slide",children:[(0,a.jsx)("h2",{children:"\uD83C\uDFE0 Performance par Logement"}),(0,a.jsx)("div",{className:"property-grid",children:r.map(e=>(0,a.jsx)(m,{property:e,stats:v},e.id))})]}),(0,a.jsxs)("section",{className:"dashboard-section","data-animation":"fade-slide",children:[(0,a.jsx)("h2",{children:"\uD83C\uDF10 Origine des R\xe9servations"}),(0,a.jsxs)("div",{className:"chart-container",children:[(0,a.jsxs)("div",{className:"pie-chart-mock",children:[(0,a.jsx)("div",{className:"pie-segment",style:{width:"".concat(p.websiteBookings/p.totalBookings*100,"%"),backgroundColor:"#0070F3"},children:(0,a.jsxs)("span",{className:"pie-label",children:["Site Web: ",p.websiteBookings]})}),(0,a.jsx)("div",{className:"pie-segment",style:{width:"".concat(p.airbnbBookings/p.totalBookings*100,"%"),backgroundColor:"#8B92A9"},children:(0,a.jsxs)("span",{className:"pie-label",children:["Airbnb: ",p.airbnbBookings]})})]}),(0,a.jsxs)("div",{className:"chart-legend",children:[(0,a.jsxs)("div",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-color",style:{backgroundColor:"#0070F3"}}),(0,a.jsxs)("span",{children:["Site Web: ",p.websiteBookings," (",(p.websiteBookings/p.totalBookings*100).toFixed(0),"%)"]})]}),(0,a.jsxs)("div",{className:"legend-item",children:[(0,a.jsx)("span",{className:"legend-color",style:{backgroundColor:"#8B92A9"}}),(0,a.jsxs)("span",{children:["Airbnb: ",p.airbnbBookings," (",(p.airbnbBookings/p.totalBookings*100).toFixed(0),"%)"]})]})]})]})]}),(0,a.jsxs)("section",{className:"dashboard-section","data-animation":"fade-slide",ref:t,children:[(0,a.jsx)("h2",{children:"\uD83D\uDCB0 Gestion des Charges (C\xe9lia)"}),(0,a.jsx)("p",{className:"section-subtitle",children:"Saisir et analyser toutes vos d\xe9penses"}),(0,a.jsx)(x,{onAddCharge:t=>s([...e,t])}),(0,a.jsxs)("div",{className:"charges-table",children:[(0,a.jsx)("h3",{children:"Charges enregistr\xe9es"}),(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Date"}),(0,a.jsx)("th",{children:"Type"}),(0,a.jsx)("th",{children:"Logement"}),(0,a.jsx)("th",{children:"Montant"}),(0,a.jsx)("th",{children:"Impact CA"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>{var s,t;let i=e.property?(null===(s=g[null===(t=r.find(s=>s.title===e.property))||void 0===t?void 0:t.slug])||void 0===s?void 0:s.ca)||0:p.totalCA,n=(e.amount/i*100).toFixed(1);return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.date}),(0,a.jsx)("td",{className:"charge-type-badge",children:e.type}),(0,a.jsx)("td",{children:e.property||"---"}),(0,a.jsxs)("td",{className:"amount",children:["€",e.amount.toFixed(2)]}),(0,a.jsxs)("td",{style:{color:n>10?"#DC2626":"#059669"},children:["-",n,"%"]})]},e.id)})})]}),(0,a.jsxs)("div",{className:"charges-summary",children:[(0,a.jsx)("span",{children:"Total charges:"}),(0,a.jsxs)("strong",{children:["€",b.toFixed(2)]}),(0,a.jsx)("span",{children:"Marge nette:"}),(0,a.jsxs)("strong",{style:{color:"#059669"},children:["€",(p.totalCA-b).toFixed(2)]})]})]})]}),(0,a.jsxs)("section",{className:"dashboard-section","data-animation":"fade-slide",children:[(0,a.jsx)("h2",{children:"\uD83D\uDD2E Pr\xe9visions & Export Comptable"}),(0,a.jsxs)("div",{className:"forecast-container",children:[(0,a.jsxs)("div",{className:"forecast-card",children:[(0,a.jsx)("h3",{children:"Pr\xe9vision CA (Janvier 2026)"}),(0,a.jsx)("div",{className:"forecast-bar",children:(0,a.jsx)("div",{className:"forecast-fill",style:{width:"65%"}})}),(0,a.jsxs)("div",{className:"forecast-text",children:[(0,a.jsxs)("strong",{children:["€",p.caFuture.toLocaleString()]})," estim\xe9",(0,a.jsxs)("span",{children:["(bas\xe9 sur ",d.length," r\xe9servations confirm\xe9es)"]})]})]}),(0,a.jsxs)("div",{className:"forecast-card",children:[(0,a.jsx)("h3",{children:"Analyse Rentabilit\xe9"}),(0,a.jsxs)("div",{className:"rentability-items",children:[(0,a.jsxs)("div",{className:"item",children:[(0,a.jsx)("span",{children:"CA g\xe9n\xe9r\xe9:"}),(0,a.jsxs)("strong",{children:["€",p.totalCA.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"item",children:[(0,a.jsx)("span",{children:"Charges:"}),(0,a.jsxs)("strong",{children:["-€",b.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"item divider",children:[(0,a.jsx)("span",{children:"Marge nette:"}),(0,a.jsxs)("strong",{style:{color:"#059669"},children:["€",(p.totalCA-b).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"item",children:[(0,a.jsx)("span",{children:"Rentabilit\xe9:"}),(0,a.jsxs)("strong",{children:[((p.totalCA-b)/p.totalCA*100).toFixed(1),"%"]})]})]})]})]}),(0,a.jsxs)("div",{className:"export-section",children:[(0,a.jsx)("button",{className:"btn-export",onClick:()=>{let s=new Blob(["Date,Type,Propri\xe9t\xe9,Montant\n".concat(e.map(e=>"".concat(e.date,",").concat(e.type,",").concat(e.property||"N/A",",").concat(e.amount)).join("\n"))],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="charges_".concat(new Date().toISOString().split("T")[0],".csv"),a.click()},children:"\uD83D\uDCE5 Exporter Charges (CSV)"}),(0,a.jsx)("button",{className:"btn-export",onClick:()=>{let e=new Blob(["Date,Logement,Statut,Prix Total,Source\n".concat(c.map(e=>"".concat(e.checkin,",").concat(e.property,",").concat(e.status,",").concat(e.total,",").concat(e.source)).join("\n"))],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="reservations_".concat(new Date().toISOString().split("T")[0],".csv"),t.click()},children:"\uD83D\uDCE5 Exporter R\xe9servations (CSV)"})]})]})]})]})}let j=c.filter(e=>"confirmed"===e.status)},3511:function(){}},function(e){e.O(0,[944,16,120,971,117,744],function(){return e(e.s=9399)}),_N_E=e.O()}]);