(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{2016:function(e,t,r){Promise.resolve().then(r.bind(r,7600))},7600:function(e,t,r){"use strict";r.r(t);var n=r(7437),s=r(2265),a=r(7648),i=r(9376),u=r(9120),o=r(2563),c=r(8675);t.default=(0,o.Q)(function(){let e=(0,i.useRouter)(),[t,r]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{let e=(0,c.e)();try{let{data:{user:t}}=await e.auth.getUser();if(!t)return;let{data:n,error:s}=await e.from("booking_requests").select("id, property_id, check_in, check_out, status, created_at").eq("client_id",t.id).order("created_at",{ascending:!1});if(s)throw s;r(n||[])}catch(e){console.error("Erreur:",e)}finally{d(!1)}})()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.DK,{}),(0,n.jsx)("div",{className:"page-container",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)(a.default,{href:"/app",style:{color:"#4F46E5"},children:"← Retour au tableau de bord"}),(0,n.jsx)("h1",{style:{marginTop:"1rem"},children:"Mes demandes de r\xe9servation"}),o?(0,n.jsx)("div",{children:"Chargement..."}):0===t.length?(0,n.jsxs)("div",{style:{marginTop:"2rem",padding:"2rem",background:"#F9FAFB",borderRadius:"0.5rem"},children:[(0,n.jsx)("p",{children:"Aucune demande de r\xe9servation pour le moment."}),(0,n.jsx)(a.default,{href:"/logements",className:"btn-primary",style:{marginTop:"1rem",display:"inline-block"},children:"D\xe9couvrir les logements"})]}):(0,n.jsx)("div",{style:{marginTop:"2rem"},children:t.map(t=>(0,n.jsx)("div",{style:{padding:"2rem",border:"1px solid #E5E7EB",borderRadius:"0.5rem",marginBottom:"1rem",cursor:"pointer",transition:"all 0.2s"},onClick:()=>e.push("/app/reservations/".concat(t.id)),onMouseEnter:e=>{e.currentTarget.style.boxShadow="0 10px 25px rgba(0, 0, 0, 0.1)",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.boxShadow="",e.currentTarget.style.transform=""},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{children:[t.check_in," → ",t.check_out]}),(0,n.jsxs)("p",{style:{color:"#6B7280",fontSize:"0.875rem"},children:["Demand\xe9e le ",new Date(t.created_at).toLocaleDateString("fr-FR")]})]}),(0,n.jsxs)("span",{style:{padding:"0.5rem 1rem",borderRadius:"0.25rem",background:"accepted"===t.status?"#DCFCE7":"rejected"===t.status?"#FEE2E2":"#FEF3C7",color:"accepted"===t.status?"#15803D":"rejected"===t.status?"#DC2626":"#B45309",fontWeight:600,whiteSpace:"nowrap"},children:["pending"===t.status&&"En attente","accepted"===t.status&&"Confirm\xe9e","rejected"===t.status&&"Rejet\xe9e"]})]})},t.id))})]})})]})})},2563:function(e,t,r){"use strict";r.d(t,{Q:function(){return u},c:function(){return o}});var n=r(7437),s=r(2265),a=r(9376),i=r(8675);function u(e){return function(t){let r=(0,a.useRouter)(),[u,o]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async()=>{let e=(0,i.e)(),{data:{user:t}}=await e.auth.getUser();if(!t){r.push("/login");return}d(t),o(!1)})()},[r]),u)?(0,n.jsx)("div",{children:"Chargement..."}):(0,n.jsx)(e,{...t,user:c})}}function o(e){return function(t){let r=(0,a.useRouter)(),[u,o]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),[l,h]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async()=>{let e=(0,i.e)(),{data:{user:t}}=await e.auth.getUser();if(!t){r.push("/admin/login");return}let{data:n}=await e.from("org_members").select("role").eq("user_id",t.id).single();if(!n||"admin"!==n.role){r.push("/");return}d(t),h(n.role),o(!1)})()},[r]),u)?(0,n.jsx)("div",{children:"Chargement..."}):(0,n.jsx)(e,{...t,user:c,role:l})}}},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[16,120,971,117,744],function(){return e(e.s=2016)}),_N_E=e.O()}]);