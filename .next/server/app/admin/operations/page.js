(()=>{var e={};e.id=250,e.ids=[250],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5934:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),a(3290),a(7764),a(5866);var s=a(3191),n=a(8716),r=a(7922),i=a.n(r),l=a(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["admin",{children:["operations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3290)),"/workspaces/Juragitesholiday/app/admin/operations/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,7764)),"/workspaces/Juragitesholiday/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/workspaces/Juragitesholiday/app/admin/operations/page.js"],u="/admin/operations/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/operations/page",pathname:"/admin/operations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},108:(e,t,a)=>{Promise.resolve().then(a.bind(a,1730))},7755:()=>{},3720:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},1730:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(326),n=a(7577);!function(){var e=Error("Cannot find module '@supabase/auth-helpers-nextjs'");throw e.code="MODULE_NOT_FOUND",e}();var r=a(1171),i=a.n(r);function l(){let e=Object(function(){var e=Error("Cannot find module '@supabase/auth-helpers-nextjs'");throw e.code="MODULE_NOT_FOUND",e}())(),[t,a]=(0,n.useState)("arrivals"),[r,l]=(0,n.useState)([]),[p,m]=(0,n.useState)(null),[h,_]=(0,n.useState)(!0),[x,g]=(0,n.useState)(null),[j,v]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[D,N]=(0,n.useState)([]),[f,C]=(0,n.useState)([]);return x?(0,s.jsxs)("div",{className:i().error,children:["Erreur : ",x]}):(0,s.jsxs)("div",{className:i().container,children:[s.jsx("h1",{children:"\uD83C\uDFE2 Gestion Op\xe9rationnelle"}),(0,s.jsxs)("div",{className:i().propertySelector,children:[s.jsx("label",{htmlFor:"property-select",children:"S\xe9lectionner un logement :"}),s.jsx("select",{id:"property-select",value:p||"",onChange:e=>m(e.target.value),children:r.map(e=>s.jsx("option",{value:e.id,children:e.title},e.id))})]}),(0,s.jsxs)("nav",{className:i().tabNav,children:[s.jsx("button",{className:`${i().tab} ${"arrivals"===t?i().active:""}`,onClick:()=>a("arrivals"),children:"\uD83D\uDCC5 Arriv\xe9es / D\xe9parts"}),s.jsx("button",{className:`${i().tab} ${"inventory"===t?i().active:""}`,onClick:()=>a("inventory"),children:"\uD83D\uDCE6 Inventaire"}),s.jsx("button",{className:`${i().tab} ${"cleaning"===t?i().active:""}`,onClick:()=>a("cleaning"),children:"\uD83E\uDDF9 M\xe9nage"}),s.jsx("button",{className:`${i().tab} ${"linens"===t?i().active:""}`,onClick:()=>a("linens"),children:"\uD83D\uDC55 Linge"})]}),s.jsx("div",{className:i().tabContent,children:h?s.jsx("div",{className:i().loading,children:"Chargement..."}):(0,s.jsxs)(s.Fragment,{children:["arrivals"===t&&s.jsx(o,{bookings:f}),"inventory"===t&&s.jsx(c,{items:j,propertyId:p,supabase:e}),"cleaning"===t&&s.jsx(d,{sessions:y,propertyId:p,supabase:e}),"linens"===t&&s.jsx(u,{linensData:D,propertyId:p,supabase:e})]})})]})}function o({bookings:e}){let t=new Date().toISOString().split("T")[0],a=e.filter(e=>e.check_in>=t),n=e.filter(e=>e.check_out>=t&&e.check_in<t);return(0,s.jsxs)("div",{className:i().tabPanel,children:[s.jsx("h2",{children:"\uD83D\uDCC5 Planification Arriv\xe9es / D\xe9parts"}),n.length>0&&(0,s.jsxs)("section",{className:i().section,children:[s.jsx("h3",{children:"\uD83D\uDEAA D\xe9parts Pr\xe9vus"}),s.jsx("div",{className:i().list,children:n.map(e=>(0,s.jsxs)("div",{className:i().listItem,children:[(0,s.jsxs)("div",{className:i().itemHeader,children:[(0,s.jsxs)("strong",{children:["D\xe9part le ",new Date(e.check_out).toLocaleDateString("fr-FR")]}),s.jsx("span",{className:i().badge,style:{backgroundColor:"orange"},children:"\xc0 nettoyer"})]}),(0,s.jsxs)("p",{children:["Clients : ",e.num_guests," personnes"]})]},e.id))})]}),a.length>0&&(0,s.jsxs)("section",{className:i().section,children:[s.jsx("h3",{children:"\uD83D\uDD14 Arriv\xe9es Pr\xe9vues"}),s.jsx("div",{className:i().list,children:a.map(e=>(0,s.jsxs)("div",{className:i().listItem,children:[(0,s.jsxs)("div",{className:i().itemHeader,children:[(0,s.jsxs)("strong",{children:["Arriv\xe9e le ",new Date(e.check_in).toLocaleDateString("fr-FR")]}),s.jsx("span",{className:i().badge,style:{backgroundColor:"green"},children:"Pr\xeat"})]}),(0,s.jsxs)("p",{children:["Clients : ",e.num_guests," personnes | Dur\xe9e : ",Math.ceil((new Date(e.check_out)-new Date(e.check_in))/864e5)," nuits"]})]},e.id))})]}),0===e.length&&s.jsx("p",{className:i().empty,children:"Aucune r\xe9servation pr\xe9vue pour cette p\xe9riode."})]})}function c({items:e,propertyId:t,supabase:a}){let[r,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)({item_name:"",category:"Vaisselle",quantity:1,condition:"ok",notes:""}),d=e.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{}),u=async e=>{e.preventDefault();try{let{error:e}=await a.from("inventory_items").insert([{property_id:t,...o}]);if(e)throw e;c({item_name:"",category:"Vaisselle",quantity:1,condition:"ok",notes:""}),l(!1),window.location.reload()}catch(e){alert("Erreur : "+e.message)}},p=e=>{switch(e){case"ok":return"#4CAF50";case"\xe0 remplacer":return"#FF9800";case"HS":return"#F44336";default:return"#757575"}};return(0,s.jsxs)("div",{className:i().tabPanel,children:[(0,s.jsxs)("div",{className:i().header,children:[s.jsx("h2",{children:"\uD83D\uDCE6 Inventaire"}),s.jsx("button",{className:i().btnPrimary,onClick:()=>l(!r),children:r?"✕ Annuler":"+ Ajouter un item"})]}),r&&(0,s.jsxs)("form",{className:i().form,onSubmit:u,children:[s.jsx("input",{type:"text",placeholder:"Nom de l'item",value:o.item_name,onChange:e=>c({...o,item_name:e.target.value}),required:!0}),s.jsx("select",{value:o.category,onChange:e=>c({...o,category:e.target.value}),children:["Vaisselle","\xc9lectrom\xe9nager","Mobilier","\xc9quipements","Autre"].map(e=>s.jsx("option",{value:e,children:e},e))}),s.jsx("input",{type:"number",min:"1",placeholder:"Quantit\xe9",value:o.quantity,onChange:e=>c({...o,quantity:parseInt(e.target.value)})}),s.jsx("select",{value:o.condition,onChange:e=>c({...o,condition:e.target.value}),children:["ok","\xe0 remplacer","HS"].map(e=>s.jsx("option",{value:e,children:e},e))}),s.jsx("textarea",{placeholder:"Commentaires (optionnel)",value:o.notes,onChange:e=>c({...o,notes:e.target.value}),rows:"2"}),s.jsx("button",{type:"submit",className:i().btnSuccess,children:"Ajouter"})]}),s.jsx("div",{className:i().inventory,children:Object.entries(d).map(([e,t])=>(0,s.jsxs)("div",{className:i().categorySection,children:[s.jsx("h3",{children:e}),s.jsx("div",{className:i().itemsGrid,children:t.map(e=>(0,s.jsxs)("div",{className:i().inventoryCard,children:[(0,s.jsxs)("div",{className:i().cardHeader,children:[s.jsx("strong",{children:e.item_name}),s.jsx("span",{className:i().conditionBadge,style:{backgroundColor:p(e.condition)},children:e.condition})]}),(0,s.jsxs)("p",{children:["Quantit\xe9 : ",s.jsx("strong",{children:e.quantity})]}),e.notes&&s.jsx("p",{className:i().notes,children:e.notes}),e.last_checked_at&&(0,s.jsxs)("p",{className:i().small,children:["V\xe9rifi\xe9 : ",new Date(e.last_checked_at).toLocaleDateString("fr-FR")]})]},e.id))})]},e))}),0===e.length&&s.jsx("p",{className:i().empty,children:"Aucun item d'inventaire. Commencez par en ajouter."})]})}function d({sessions:e,propertyId:t,supabase:a}){let[r,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)({scheduled_date:"",cleaning_type:"standard",duration_hours:3,notes:""}),d=async e=>{e.preventDefault();try{let{error:e}=await a.from("cleaning_sessions").insert([{property_id:t,...o,is_completed:!1}]);if(e)throw e;c({scheduled_date:"",cleaning_type:"standard",duration_hours:3,notes:""}),l(!1),window.location.reload()}catch(e){alert("Erreur : "+e.message)}},u=async(e,t)=>{try{let{error:s}=await a.from("cleaning_sessions").update({is_completed:!t,completed_at:t?null:new Date().toISOString()}).eq("id",e);if(s)throw s;window.location.reload()}catch(e){alert("Erreur : "+e.message)}},p=e.filter(e=>!e.is_completed),m=e.filter(e=>e.is_completed);return(0,s.jsxs)("div",{className:i().tabPanel,children:[(0,s.jsxs)("div",{className:i().header,children:[s.jsx("h2",{children:"\uD83E\uDDF9 M\xe9nage"}),s.jsx("button",{className:i().btnPrimary,onClick:()=>l(!r),children:r?"✕ Annuler":"+ Planifier un m\xe9nage"})]}),r&&(0,s.jsxs)("form",{className:i().form,onSubmit:d,children:[s.jsx("input",{type:"date",value:o.scheduled_date,onChange:e=>c({...o,scheduled_date:e.target.value}),required:!0}),(0,s.jsxs)("select",{value:o.cleaning_type,onChange:e=>c({...o,cleaning_type:e.target.value}),children:[s.jsx("option",{value:"standard",children:"Standard"}),s.jsx("option",{value:"approfondi",children:"Approfondi"})]}),s.jsx("input",{type:"number",min:"0.5",step:"0.5",placeholder:"Dur\xe9e (heures)",value:o.duration_hours,onChange:e=>c({...o,duration_hours:parseFloat(e.target.value)})}),s.jsx("textarea",{placeholder:"Commentaires (optionnel)",value:o.notes,onChange:e=>c({...o,notes:e.target.value}),rows:"2"}),s.jsx("button",{type:"submit",className:i().btnSuccess,children:"Planifier"})]}),p.length>0&&(0,s.jsxs)("section",{className:i().section,children:[s.jsx("h3",{children:"\uD83D\uDCCB \xc0 faire"}),s.jsx("div",{className:i().list,children:p.map(e=>(0,s.jsxs)("div",{className:i().listItem,children:[(0,s.jsxs)("div",{className:i().itemHeader,children:[(0,s.jsxs)("strong",{children:[new Date(e.scheduled_date).toLocaleDateString("fr-FR")," - ","approfondi"===e.cleaning_type?"M\xe9nage approfondi":"M\xe9nage standard"]}),s.jsx("button",{className:i().btnSmall,onClick:()=>u(e.id,e.is_completed),children:"✓ Marquer comme compl\xe9t\xe9"})]}),(0,s.jsxs)("p",{children:["Dur\xe9e : ",e.duration_hours,"h ",e.notes&&`| ${e.notes}`]})]},e.id))})]}),m.length>0&&(0,s.jsxs)("section",{className:i().section,children:[s.jsx("h3",{children:"✅ Compl\xe9t\xe9"}),s.jsx("div",{className:i().list,children:m.map(e=>(0,s.jsxs)("div",{className:`${i().listItem} ${i().completed}`,children:[(0,s.jsxs)("div",{className:i().itemHeader,children:[s.jsx("strong",{children:new Date(e.scheduled_date).toLocaleDateString("fr-FR")}),s.jsx("span",{className:i().badge,children:"Compl\xe9t\xe9"})]}),(0,s.jsxs)("p",{children:["Dur\xe9e : ",e.duration_hours,"h"]})]},e.id))})]}),0===e.length&&s.jsx("p",{className:i().empty,children:"Aucune session de m\xe9nage planifi\xe9e."})]})}function u({linensData:e,propertyId:t,supabase:a}){let[r,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)({linen_type:"Draps",quantity:1,status:"Disponible"}),d=["Disponible","Propre","Sale","En lavage","Manquant"],u=async e=>{e.preventDefault();try{let{error:e}=await a.from("linens").insert([{property_id:t,...o}]);if(e)throw e;c({linen_type:"Draps",quantity:1,status:"Disponible"}),l(!1),window.location.reload()}catch(e){alert("Erreur : "+e.message)}},p=async(e,t)=>{try{let{error:s}=await a.from("linens").update({status:t,last_status_change_at:new Date().toISOString()}).eq("id",e);if(s)throw s;window.location.reload()}catch(e){alert("Erreur : "+e.message)}},m=e=>{switch(e){case"Disponible":return"#4CAF50";case"Propre":return"#2196F3";case"Sale":return"#FF5722";case"En lavage":return"#FF9800";case"Manquant":return"#9C27B0";default:return"#757575"}};return(0,s.jsxs)("div",{className:i().tabPanel,children:[(0,s.jsxs)("div",{className:i().header,children:[s.jsx("h2",{children:"\uD83D\uDC55 Gestion du Linge"}),s.jsx("button",{className:i().btnPrimary,onClick:()=>l(!r),children:r?"✕ Annuler":"+ Ajouter du linge"})]}),r&&(0,s.jsxs)("form",{className:i().form,onSubmit:u,children:[s.jsx("select",{value:o.linen_type,onChange:e=>c({...o,linen_type:e.target.value}),children:["Draps","Serviettes","Housses de couette","Taies d'oreiller","Autre"].map(e=>s.jsx("option",{value:e,children:e},e))}),s.jsx("input",{type:"number",min:"1",placeholder:"Quantit\xe9",value:o.quantity,onChange:e=>c({...o,quantity:parseInt(e.target.value)})}),s.jsx("select",{value:o.status,onChange:e=>c({...o,status:e.target.value}),children:d.map(e=>s.jsx("option",{value:e,children:e},e))}),s.jsx("button",{type:"submit",className:i().btnSuccess,children:"Ajouter"})]}),s.jsx("div",{className:i().linensGrid,children:e.map(e=>(0,s.jsxs)("div",{className:i().linensCard,children:[(0,s.jsxs)("div",{className:i().cardHeader,children:[s.jsx("strong",{children:e.linen_type}),(0,s.jsxs)("span",{className:i().quantity,children:["x",e.quantity]})]}),(0,s.jsxs)("div",{className:i().statusSelector,children:[s.jsx("select",{value:e.status,onChange:t=>p(e.id,t.target.value),children:d.map(e=>s.jsx("option",{value:e,children:e},e))}),s.jsx("span",{className:i().statusBadge,style:{backgroundColor:m(e.status)},children:e.status})]})]},e.id))}),0===e.length&&s.jsx("p",{className:i().empty,children:"Aucun linge enregistr\xe9. Commencez par en ajouter."})]})}},1171:e=>{e.exports={container:"operations_container___2y7q",propertySelector:"operations_propertySelector__jde_n",tabNav:"operations_tabNav__4zKpt",tab:"operations_tab___lqYH",active:"operations_active__pKGOW",tabContent:"operations_tabContent__1ns0O",tabPanel:"operations_tabPanel__D2yQf",fadeIn:"operations_fadeIn__Nzxuu",header:"operations_header__YoBr3",btnPrimary:"operations_btnPrimary__WU9gp",btnSuccess:"operations_btnSuccess__uDcJT",btnSmall:"operations_btnSmall__9D9S8",form:"operations_form__tTiV8",list:"operations_list__I9nH5",listItem:"operations_listItem__GcwE9",completed:"operations_completed__vfuhA",itemHeader:"operations_itemHeader__bxgoZ",badge:"operations_badge__BZ_A1",conditionBadge:"operations_conditionBadge__bdAra",statusBadge:"operations_statusBadge__lNoub",inventory:"operations_inventory__xerGY",categorySection:"operations_categorySection__usJiJ",itemsGrid:"operations_itemsGrid__e1RYt",inventoryCard:"operations_inventoryCard__dUKvK",cardHeader:"operations_cardHeader__zJ4nG",notes:"operations_notes__ecOCu",small:"operations_small__CS7Ml",linensGrid:"operations_linensGrid__DZqJy",linensCard:"operations_linensCard__1Wxg8",quantity:"operations_quantity__S_UIk",statusSelector:"operations_statusSelector__WH24e",section:"operations_section__MT1YL",empty:"operations_empty__bOybB",loading:"operations_loading__s0Xfd",error:"operations_error__j7YZC"}},3290:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/workspaces/Juragitesholiday/app/admin/operations/page.js#default`)},7764:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r,metadata:()=>n});var s=a(9510);a(7272);let n={title:"JuraGites - G\xeetes de vacances meubl\xe9s",description:"D\xe9couvrez nos g\xeetes de vacances meubl\xe9s de luxe dans le Jura"};function r({children:e}){return s.jsx("html",{lang:"fr",children:s.jsx("body",{children:e})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[819],()=>a(5934));module.exports=s})();