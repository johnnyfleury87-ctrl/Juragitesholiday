(()=>{var e={};e.id=250,e.ids=[250],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5934:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(3290),s(7764),s(5866);var a=s(3191),n=s(8716),r=s(7922),i=s.n(r),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["admin",{children:["operations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3290)),"/workspaces/Juragitesholiday/app/admin/operations/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7764)),"/workspaces/Juragitesholiday/app/layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/workspaces/Juragitesholiday/app/admin/operations/page.js"],u="/admin/operations/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/operations/page",pathname:"/admin/operations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},108:(e,t,s)=>{Promise.resolve().then(s.bind(s,1730))},7755:()=>{},3720:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},1730:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(326),n=s(7577),r=s(8930),i=s(1171),l=s.n(i);function o(){let e=(0,r.e)(),[t,s]=(0,n.useState)("arrivals"),[i,o]=(0,n.useState)([]),[m,h]=(0,n.useState)(null),[_,g]=(0,n.useState)(!0),[x,j]=(0,n.useState)(null),[v,y]=(0,n.useState)([]),[b,D]=(0,n.useState)([]),[N,f]=(0,n.useState)([]),[C,S]=(0,n.useState)([]);return x?(0,a.jsxs)("div",{className:l().error,children:["Erreur : ",x]}):(0,a.jsxs)("div",{className:l().container,children:[a.jsx("h1",{children:"\uD83C\uDFE2 Gestion Op\xe9rationnelle"}),(0,a.jsxs)("div",{className:l().propertySelector,children:[a.jsx("label",{htmlFor:"property-select",children:"S\xe9lectionner un logement :"}),a.jsx("select",{id:"property-select",value:m||"",onChange:e=>h(e.target.value),children:i.map(e=>a.jsx("option",{value:e.id,children:e.title},e.id))})]}),(0,a.jsxs)("nav",{className:l().tabNav,children:[a.jsx("button",{className:`${l().tab} ${"arrivals"===t?l().active:""}`,onClick:()=>s("arrivals"),children:"\uD83D\uDCC5 Arriv\xe9es / D\xe9parts"}),a.jsx("button",{className:`${l().tab} ${"inventory"===t?l().active:""}`,onClick:()=>s("inventory"),children:"\uD83D\uDCE6 Inventaire"}),a.jsx("button",{className:`${l().tab} ${"cleaning"===t?l().active:""}`,onClick:()=>s("cleaning"),children:"\uD83E\uDDF9 M\xe9nage"}),a.jsx("button",{className:`${l().tab} ${"linens"===t?l().active:""}`,onClick:()=>s("linens"),children:"\uD83D\uDC55 Linge"})]}),a.jsx("div",{className:l().tabContent,children:_?a.jsx("div",{className:l().loading,children:"Chargement..."}):(0,a.jsxs)(a.Fragment,{children:["arrivals"===t&&a.jsx(c,{bookings:C}),"inventory"===t&&a.jsx(d,{items:v,propertyId:m,supabase:e}),"cleaning"===t&&a.jsx(u,{sessions:b,propertyId:m,supabase:e}),"linens"===t&&a.jsx(p,{linensData:N,propertyId:m,supabase:e})]})})]})}function c({bookings:e}){let t=new Date().toISOString().split("T")[0],s=e.filter(e=>e.check_in>=t),n=e.filter(e=>e.check_out>=t&&e.check_in<t);return(0,a.jsxs)("div",{className:l().tabPanel,children:[a.jsx("h2",{children:"\uD83D\uDCC5 Planification Arriv\xe9es / D\xe9parts"}),n.length>0&&(0,a.jsxs)("section",{className:l().section,children:[a.jsx("h3",{children:"\uD83D\uDEAA D\xe9parts Pr\xe9vus"}),a.jsx("div",{className:l().list,children:n.map(e=>(0,a.jsxs)("div",{className:l().listItem,children:[(0,a.jsxs)("div",{className:l().itemHeader,children:[(0,a.jsxs)("strong",{children:["D\xe9part le ",new Date(e.check_out).toLocaleDateString("fr-FR")]}),a.jsx("span",{className:l().badge,style:{backgroundColor:"orange"},children:"\xc0 nettoyer"})]}),(0,a.jsxs)("p",{children:["Clients : ",e.num_guests," personnes"]})]},e.id))})]}),s.length>0&&(0,a.jsxs)("section",{className:l().section,children:[a.jsx("h3",{children:"\uD83D\uDD14 Arriv\xe9es Pr\xe9vues"}),a.jsx("div",{className:l().list,children:s.map(e=>(0,a.jsxs)("div",{className:l().listItem,children:[(0,a.jsxs)("div",{className:l().itemHeader,children:[(0,a.jsxs)("strong",{children:["Arriv\xe9e le ",new Date(e.check_in).toLocaleDateString("fr-FR")]}),a.jsx("span",{className:l().badge,style:{backgroundColor:"green"},children:"Pr\xeat"})]}),(0,a.jsxs)("p",{children:["Clients : ",e.num_guests," personnes | Dur\xe9e : ",Math.ceil((new Date(e.check_out)-new Date(e.check_in))/864e5)," nuits"]})]},e.id))})]}),0===e.length&&a.jsx("p",{className:l().empty,children:"Aucune r\xe9servation pr\xe9vue pour cette p\xe9riode."})]})}function d({items:e,propertyId:t,supabase:s}){let[r,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)({item_name:"",category:"Vaisselle",quantity:1,condition:"ok",notes:""}),d=e.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{}),u=async e=>{e.preventDefault();try{let{error:e}=await s.from("inventory_items").insert([{property_id:t,...o}]);if(e)throw e;c({item_name:"",category:"Vaisselle",quantity:1,condition:"ok",notes:""}),i(!1),window.location.reload()}catch(e){alert("Erreur : "+e.message)}},p=e=>{switch(e){case"ok":return"#4CAF50";case"\xe0 remplacer":return"#FF9800";case"HS":return"#F44336";default:return"#757575"}};return(0,a.jsxs)("div",{className:l().tabPanel,children:[(0,a.jsxs)("div",{className:l().header,children:[a.jsx("h2",{children:"\uD83D\uDCE6 Inventaire"}),a.jsx("button",{className:l().btnPrimary,onClick:()=>i(!r),children:r?"✕ Annuler":"+ Ajouter un item"})]}),r&&(0,a.jsxs)("form",{className:l().form,onSubmit:u,children:[a.jsx("input",{type:"text",placeholder:"Nom de l'item",value:o.item_name,onChange:e=>c({...o,item_name:e.target.value}),required:!0}),a.jsx("select",{value:o.category,onChange:e=>c({...o,category:e.target.value}),children:["Vaisselle","\xc9lectrom\xe9nager","Mobilier","\xc9quipements","Autre"].map(e=>a.jsx("option",{value:e,children:e},e))}),a.jsx("input",{type:"number",min:"1",placeholder:"Quantit\xe9",value:o.quantity,onChange:e=>c({...o,quantity:parseInt(e.target.value)})}),a.jsx("select",{value:o.condition,onChange:e=>c({...o,condition:e.target.value}),children:["ok","\xe0 remplacer","HS"].map(e=>a.jsx("option",{value:e,children:e},e))}),a.jsx("textarea",{placeholder:"Commentaires (optionnel)",value:o.notes,onChange:e=>c({...o,notes:e.target.value}),rows:"2"}),a.jsx("button",{type:"submit",className:l().btnSuccess,children:"Ajouter"})]}),a.jsx("div",{className:l().inventory,children:Object.entries(d).map(([e,t])=>(0,a.jsxs)("div",{className:l().categorySection,children:[a.jsx("h3",{children:e}),a.jsx("div",{className:l().itemsGrid,children:t.map(e=>(0,a.jsxs)("div",{className:l().inventoryCard,children:[(0,a.jsxs)("div",{className:l().cardHeader,children:[a.jsx("strong",{children:e.item_name}),a.jsx("span",{className:l().conditionBadge,style:{backgroundColor:p(e.condition)},children:e.condition})]}),(0,a.jsxs)("p",{children:["Quantit\xe9 : ",a.jsx("strong",{children:e.quantity})]}),e.notes&&a.jsx("p",{className:l().notes,children:e.notes}),e.last_checked_at&&(0,a.jsxs)("p",{className:l().small,children:["V\xe9rifi\xe9 : ",new Date(e.last_checked_at).toLocaleDateString("fr-FR")]})]},e.id))})]},e))}),0===e.length&&a.jsx("p",{className:l().empty,children:"Aucun item d'inventaire. Commencez par en ajouter."})]})}function u({sessions:e,propertyId:t,supabase:s}){let[r,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)({scheduled_date:"",cleaning_type:"standard",duration_hours:3,notes:""}),d=async e=>{e.preventDefault();try{let{error:e}=await s.from("cleaning_sessions").insert([{property_id:t,...o,is_completed:!1}]);if(e)throw e;c({scheduled_date:"",cleaning_type:"standard",duration_hours:3,notes:""}),i(!1),window.location.reload()}catch(e){alert("Erreur : "+e.message)}},u=async(e,t)=>{try{let{error:a}=await s.from("cleaning_sessions").update({is_completed:!t,completed_at:t?null:new Date().toISOString()}).eq("id",e);if(a)throw a;window.location.reload()}catch(e){alert("Erreur : "+e.message)}},p=e.filter(e=>!e.is_completed),m=e.filter(e=>e.is_completed);return(0,a.jsxs)("div",{className:l().tabPanel,children:[(0,a.jsxs)("div",{className:l().header,children:[a.jsx("h2",{children:"\uD83E\uDDF9 M\xe9nage"}),a.jsx("button",{className:l().btnPrimary,onClick:()=>i(!r),children:r?"✕ Annuler":"+ Planifier un m\xe9nage"})]}),r&&(0,a.jsxs)("form",{className:l().form,onSubmit:d,children:[a.jsx("input",{type:"date",value:o.scheduled_date,onChange:e=>c({...o,scheduled_date:e.target.value}),required:!0}),(0,a.jsxs)("select",{value:o.cleaning_type,onChange:e=>c({...o,cleaning_type:e.target.value}),children:[a.jsx("option",{value:"standard",children:"Standard"}),a.jsx("option",{value:"approfondi",children:"Approfondi"})]}),a.jsx("input",{type:"number",min:"0.5",step:"0.5",placeholder:"Dur\xe9e (heures)",value:o.duration_hours,onChange:e=>c({...o,duration_hours:parseFloat(e.target.value)})}),a.jsx("textarea",{placeholder:"Commentaires (optionnel)",value:o.notes,onChange:e=>c({...o,notes:e.target.value}),rows:"2"}),a.jsx("button",{type:"submit",className:l().btnSuccess,children:"Planifier"})]}),p.length>0&&(0,a.jsxs)("section",{className:l().section,children:[a.jsx("h3",{children:"\uD83D\uDCCB \xc0 faire"}),a.jsx("div",{className:l().list,children:p.map(e=>(0,a.jsxs)("div",{className:l().listItem,children:[(0,a.jsxs)("div",{className:l().itemHeader,children:[(0,a.jsxs)("strong",{children:[new Date(e.scheduled_date).toLocaleDateString("fr-FR")," - ","approfondi"===e.cleaning_type?"M\xe9nage approfondi":"M\xe9nage standard"]}),a.jsx("button",{className:l().btnSmall,onClick:()=>u(e.id,e.is_completed),children:"✓ Marquer comme compl\xe9t\xe9"})]}),(0,a.jsxs)("p",{children:["Dur\xe9e : ",e.duration_hours,"h ",e.notes&&`| ${e.notes}`]})]},e.id))})]}),m.length>0&&(0,a.jsxs)("section",{className:l().section,children:[a.jsx("h3",{children:"✅ Compl\xe9t\xe9"}),a.jsx("div",{className:l().list,children:m.map(e=>(0,a.jsxs)("div",{className:`${l().listItem} ${l().completed}`,children:[(0,a.jsxs)("div",{className:l().itemHeader,children:[a.jsx("strong",{children:new Date(e.scheduled_date).toLocaleDateString("fr-FR")}),a.jsx("span",{className:l().badge,children:"Compl\xe9t\xe9"})]}),(0,a.jsxs)("p",{children:["Dur\xe9e : ",e.duration_hours,"h"]})]},e.id))})]}),0===e.length&&a.jsx("p",{className:l().empty,children:"Aucune session de m\xe9nage planifi\xe9e."})]})}function p({linensData:e,propertyId:t,supabase:s}){let[r,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)({linen_type:"Draps",quantity:1,status:"Disponible"}),d=["Disponible","Propre","Sale","En lavage","Manquant"],u=async e=>{e.preventDefault();try{let{error:e}=await s.from("linens").insert([{property_id:t,...o}]);if(e)throw e;c({linen_type:"Draps",quantity:1,status:"Disponible"}),i(!1),window.location.reload()}catch(e){alert("Erreur : "+e.message)}},p=async(e,t)=>{try{let{error:a}=await s.from("linens").update({status:t,last_status_change_at:new Date().toISOString()}).eq("id",e);if(a)throw a;window.location.reload()}catch(e){alert("Erreur : "+e.message)}},m=e=>{switch(e){case"Disponible":return"#4CAF50";case"Propre":return"#2196F3";case"Sale":return"#FF5722";case"En lavage":return"#FF9800";case"Manquant":return"#9C27B0";default:return"#757575"}};return(0,a.jsxs)("div",{className:l().tabPanel,children:[(0,a.jsxs)("div",{className:l().header,children:[a.jsx("h2",{children:"\uD83D\uDC55 Gestion du Linge"}),a.jsx("button",{className:l().btnPrimary,onClick:()=>i(!r),children:r?"✕ Annuler":"+ Ajouter du linge"})]}),r&&(0,a.jsxs)("form",{className:l().form,onSubmit:u,children:[a.jsx("select",{value:o.linen_type,onChange:e=>c({...o,linen_type:e.target.value}),children:["Draps","Serviettes","Housses de couette","Taies d&apos;oreiller","Autre"].map(e=>a.jsx("option",{value:e,children:e},e))}),a.jsx("input",{type:"number",min:"1",placeholder:"Quantit\xe9",value:o.quantity,onChange:e=>c({...o,quantity:parseInt(e.target.value)})}),a.jsx("select",{value:o.status,onChange:e=>c({...o,status:e.target.value}),children:d.map(e=>a.jsx("option",{value:e,children:e},e))}),a.jsx("button",{type:"submit",className:l().btnSuccess,children:"Ajouter"})]}),a.jsx("div",{className:l().linensGrid,children:e.map(e=>(0,a.jsxs)("div",{className:l().linensCard,children:[(0,a.jsxs)("div",{className:l().cardHeader,children:[a.jsx("strong",{children:e.linen_type}),(0,a.jsxs)("span",{className:l().quantity,children:["x",e.quantity]})]}),(0,a.jsxs)("div",{className:l().statusSelector,children:[a.jsx("select",{value:e.status,onChange:t=>p(e.id,t.target.value),children:d.map(e=>a.jsx("option",{value:e,children:e},e))}),a.jsx("span",{className:l().statusBadge,style:{backgroundColor:m(e.status)},children:e.status})]})]},e.id))}),0===e.length&&a.jsx("p",{className:l().empty,children:"Aucun linge enregistr\xe9. Commencez par en ajouter."})]})}},8930:(e,t,s)=>{"use strict";s.d(t,{e:()=>r});var a=s(5157);let n=null,r=()=>n||(n=(0,a.eI)("https://kcvgxxqvhfcgifymgpji.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtjdmd4eHF2aGZjZ2lmeW1ncGppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzMDAxMzAsImV4cCI6MjA4Mzg3NjEzMH0.3D1oyy3CzLDn6ElP351fdyuHzG5tdn9ISO1oRu1o8JE"));r()},1171:e=>{e.exports={container:"operations_container___2y7q",propertySelector:"operations_propertySelector__jde_n",tabNav:"operations_tabNav__4zKpt",tab:"operations_tab___lqYH",active:"operations_active__pKGOW",tabContent:"operations_tabContent__1ns0O",tabPanel:"operations_tabPanel__D2yQf",fadeIn:"operations_fadeIn__Nzxuu",header:"operations_header__YoBr3",btnPrimary:"operations_btnPrimary__WU9gp",btnSuccess:"operations_btnSuccess__uDcJT",btnSmall:"operations_btnSmall__9D9S8",form:"operations_form__tTiV8",list:"operations_list__I9nH5",listItem:"operations_listItem__GcwE9",completed:"operations_completed__vfuhA",itemHeader:"operations_itemHeader__bxgoZ",badge:"operations_badge__BZ_A1",conditionBadge:"operations_conditionBadge__bdAra",statusBadge:"operations_statusBadge__lNoub",inventory:"operations_inventory__xerGY",categorySection:"operations_categorySection__usJiJ",itemsGrid:"operations_itemsGrid__e1RYt",inventoryCard:"operations_inventoryCard__dUKvK",cardHeader:"operations_cardHeader__zJ4nG",notes:"operations_notes__ecOCu",small:"operations_small__CS7Ml",linensGrid:"operations_linensGrid__DZqJy",linensCard:"operations_linensCard__1Wxg8",quantity:"operations_quantity__S_UIk",statusSelector:"operations_statusSelector__WH24e",section:"operations_section__MT1YL",empty:"operations_empty__bOybB",loading:"operations_loading__s0Xfd",error:"operations_error__j7YZC"}},3290:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/workspaces/Juragitesholiday/app/admin/operations/page.js#default`)},7764:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r,metadata:()=>n});var a=s(9510);s(7272);let n={title:"JuraGites - G\xeetes de vacances meubl\xe9s",description:"D\xe9couvrez nos g\xeetes de vacances meubl\xe9s de luxe dans le Jura"};function r({children:e}){return a.jsx("html",{lang:"fr",children:a.jsx("body",{children:e})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[819,157],()=>s(5934));module.exports=a})();