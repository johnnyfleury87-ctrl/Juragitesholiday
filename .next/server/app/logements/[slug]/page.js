(()=>{var e={};e.id=983,e.ids=[983],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1045:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>d}),r(1912),r(7764),r(5866);var t=r(3191),n=r(8716),i=r(7922),a=r.n(i),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(s,l);let d=["",{children:["logements",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1912)),"/workspaces/Juragitesholiday/app/logements/[slug]/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7764)),"/workspaces/Juragitesholiday/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/Juragitesholiday/app/logements/[slug]/page.js"],u="/logements/[slug]/page",p={require:r,loadChunk:()=>Promise.resolve()},g=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/logements/[slug]/page",pathname:"/logements/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3034:(e,s,r)=>{Promise.resolve().then(r.bind(r,7910))},7910:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d});var t=r(326),n=r(7577),i=r(434),a=r(5047),o=r(231),l=r(8930);function d({params:e}){let s=(0,a.useRouter)(),{slug:r}=e,[d,c]=(0,n.useState)(null),[u,p]=(0,n.useState)([]),[g,m]=(0,n.useState)(null),[h,x]=(0,n.useState)(!0),[j,v]=(0,n.useState)(!1),[y,f]=(0,n.useState)(""),_=async e=>{if(!g){s.push("/login");return}v(!0),f("");try{let r=(0,l.e)(),{error:t}=await r.from("booking_requests").insert([{property_id:d.id,client_id:g.id,check_in:e.checkIn,check_out:e.checkOut,num_guests:e.numGuests,status:"pending"}]);if(t)throw t;f("Demande de r\xe9servation envoy\xe9e avec succ\xe8s !"),setTimeout(()=>{s.push("/app/reservations")},1500)}catch(e){console.error("Erreur:",e),f("Erreur lors de l'envoi de la demande")}finally{v(!1)}};return h?(0,t.jsxs)("div",{children:[t.jsx(o.sZ,{}),t.jsx("div",{className:"page-container container",children:"Chargement..."})]}):d?(0,t.jsxs)(t.Fragment,{children:[t.jsx(o.sZ,{}),t.jsx("div",{className:"page-container",children:(0,t.jsxs)("div",{className:"container",children:[t.jsx(i.default,{href:"/logements",style:{color:"#4F46E5"},children:"← Retour aux logements"}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3rem",marginTop:"2rem"},children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{children:d.title}),t.jsx("p",{className:"location",children:d.location}),t.jsx("p",{style:{marginTop:"1rem",lineHeight:"1.6"},children:d.description}),(0,t.jsxs)("div",{style:{marginTop:"2rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,t.jsxs)("div",{children:[t.jsx("strong",{children:"Personnes max:"})," ",d.max_guests]}),(0,t.jsxs)("div",{children:[t.jsx("strong",{children:"Chambres:"})," ",d.bedrooms]}),(0,t.jsxs)("div",{children:[t.jsx("strong",{children:"Salles de bain:"})," ",d.bathrooms]}),(0,t.jsxs)("div",{children:[t.jsx("strong",{children:"Prix / nuit:"})," ",d.price_per_night,"€"]})]}),(0,t.jsxs)("div",{style:{marginTop:"2rem"},children:[t.jsx("h3",{children:"Galerie"}),0===u.length?t.jsx("p",{children:"Aucune photo disponible"}):t.jsx("div",{className:"grid grid-cols-2",style:{marginTop:"1rem"},children:u.map((e,s)=>(0,t.jsxs)("div",{style:{borderRadius:"0.5rem",objectFit:"cover",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",height:"200px",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:["\uD83D\uDCF8 Photo ",s+1]},e.id))})]})]}),(0,t.jsxs)("div",{children:[y&&t.jsx("div",{className:y.includes("succ\xe8s")?"success-message":"error-message",children:y}),t.jsx(o.fl,{propertyId:d.id,onSubmit:_,loading:j})]})]})]})}),t.jsx(o.dX,{})]}):(0,t.jsxs)("div",{children:[t.jsx(o.sZ,{}),t.jsx("div",{className:"page-container container",children:"Propri\xe9t\xe9 non trouv\xe9e"})]})}},5047:(e,s,r)=>{"use strict";var t=r(7389);r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},1912:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(8570).createProxy)(String.raw`/workspaces/Juragitesholiday/app/logements/[slug]/page.js#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[819,157,434,314],()=>r(1045));module.exports=t})();